const KintoneTools={const:{round:{round:0,ceil:1,floor:2}},createUniqNumber:function(){return Number((new Date).getTime().toString()+KintoneTools.padding(Math.floor(1e3*Math.random()),3))},createZeroFillNextValue:function(records,field,len){let nextVal=1;return 0!==records.length&&(nextVal=Number(records[0][field].value)+1),KintoneTools.padding(nextVal,len)},createNextUid:function(records){let nextUid=1;return 0!==records.length&&(nextUid=Number(records[0].uid.value)+1),nextUid},setNextUid:function(record,records){record.uid.value=KintoneTools.createNextUid(records)},setRecordTitle:function(record,fields){record.record_title.value=KintoneTools.joinFieldValue(record,fields)},setRecordTitleByValue:function(record,values,delimiter){let strDelimiter=delimiter||" ";record.record_title.value=values.join(strDelimiter)},setLookupKey:function(record,fields){record.lookup_key.value=KintoneTools.joinFieldValue(record,fields)},setLookupKeyByValue:function(record,values,delimiter){let strDelimiter=delimiter||" ";record.lookup_key.value=values.join(strDelimiter)},joinFieldValue:function(record,fields,delimiter){let strDelimiter=delimiter||" ",retStr="";return fields.forEach(function(val){record[val].value&&(retStr+=record[val].value+strDelimiter)}),retStr=retStr.slice(0,-1)},commaSeparate:function(num){return String(num).replace(/(\d)(?=(\d\d\d)+(?!\d))/g,"$1,")},padding:function(num,len,fillStr){let str,base;return((fillStr||"0").repeat(len)+num).slice(-1*len)},rounding:function(num,type,digit){digit=-1*digit||0;let ret=num*Math.pow(10,digit);switch(type){case KintoneTools.const.round.round:ret=Math.round(ret);break;case KintoneTools.const.round.ceil:ret=Math.ceil(ret);break;case KintoneTools.const.round.floor:ret=Math.floor(ret);break;default:ret=Math.round(ret)}return ret/=Math.pow(10,digit)},getQueryToObject:function(strParam){let objRet={},aryParams;return strParam.split("&").forEach(function(val){let aryTmp=val.split("=");objRet[aryTmp[0]]=aryTmp[1]}),objRet},getThisAppId:function(){let thisAppId=-1;return null!=kintone.app.getId()&&(thisAppId=kintone.app.getId()),null!=kintone.mobile.app.getId()&&(thisAppId=kintone.mobile.app.getId()),thisAppId},getAge:function(bd){let age=-1,arrBd=bd.split("-"),birthday=new Date(arrBd[0],arrBd[1]-1,arrBd[2]),today=new Date,thisYearBirthday=new Date(today.getFullYear(),birthday.getMonth(),birthday.getDate());return age=today.getFullYear()-birthday.getFullYear(),today<thisYearBirthday&&age--,age}};String.prototype.repeat||(String.prototype.repeat=function(len){return Array(len+1).join(this)});